---
title: "Photo Album"
permalink: /photo.html
---

{% include head.html %}

<body id="page-top" class="photo-page" oncontextmenu="return false;">
  {# nav intentionally omitted on this page #}

  <section id="photos" class="content-section bg-light">
    <div class="container">
      <div class="content-section-heading text-center">
        <h2 class="mb-5">Family Memories</h2>
      </div>

      <div class="photo-grid" aria-live="polite">
        {%- assign items = site.data.photos | default: empty -%}
        {%- for p in items -%}
          {%- assign base = p.base -%}
          {%- assign caption = p.caption | default: '' -%}
          {%- assign thumb800  = p.thumb800  | default: base | replace: '.jpg','_800.jpg'  | replace: '.jpeg','_800.jpeg' | replace: '.png','_800.png' -%}
          {%- assign thumb1200 = p.thumb1200 | default: base | replace: '.jpg','_1200.jpg' | replace: '.jpeg','_1200.jpeg'| replace: '.png','_1200.png' -%}

          <div class="photo-item"
               tabindex="0"
               role="button"
               aria-label="Open photo"
               data-full="{{ base | relative_url }}"
               data-caption="{{ caption | escape }}">
            <img class="photo-img"
                 loading="lazy"
                 decoding="async"
                 fetchpriority="low"
                 draggable="false"
                 src="{{ thumb800   | relative_url }}"
                 srcset="{{ thumb800 | relative_url }} 800w, {{ thumb1200 | relative_url }} 1200w"
                 sizes="(min-width: 992px) 31vw, (min-width: 576px) 48vw, 100vw"
                 alt="{{ caption | default: 'Family Photo' | escape }}">
          </div>
        {%- endfor -%}
      </div>
    </div>
  </section>

  <!-- Modal -->
  <div class="modal fade" id="photoModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content no-header">
        <div class="modal-body p-0 d-flex align-items-center justify-content-center">
          <figure class="modal-figure m-0">
            <div class="zoom-viewport">
              <img class="modal-img" src="" alt="Enlarged Photo" draggable="false">
            </div>
            <figcaption class="modal-caption" role="note" aria-live="polite">
              <span class="caption-text"></span>
              <button type="button" class="caption-toggle" aria-expanded="false">더보기</button>
            </figcaption>
          </figure>
        </div>
      </div>
    </div>
  </div>

  {% include scripts.html %}

  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@4.1.4/imagesloaded.pkgd.min.js"></script>

  <style>
    html, body.photo-page { max-width:100%; overflow-x:hidden; }
    .container { max-width: min(1100px, 100%); padding: 0 12px; }

    body.photo-page {
      --warm-bg1:#fff7f0; --warm-bg2:#ffe9d6; --warm-accent:#b25c2e;
      --card-bg:#fffaf6; --card-shadow:0 8px 24px rgba(178,92,46,0.12);
      --text-strong:#3b2a22; --text-soft:#6b5247;
      background: linear-gradient(180deg, var(--warm-bg1), var(--warm-bg2));
      color: var(--text-strong);
      -webkit-user-select:none; user-select:none; -webkit-touch-callout:none;
      -webkit-tap-highlight-color:transparent;
    }
    .photo-grid { margin:0 auto; padding:0 4px; overflow:hidden; }

    .photo-item {
      width:31%; aspect-ratio:1/1; margin-bottom:12px; border-radius:16px; overflow:hidden;
      box-shadow:var(--card-shadow); background:var(--card-bg); position:relative; cursor:zoom-in; transform:translateZ(0); box-sizing:border-box;
    }
    @media (max-width: 992px) { .photo-item { width:48%; } }
    @media (max-width: 576px) { .photo-item { width:100%; } }

    .photo-item::before{ content:""; position:absolute; inset:0; background:linear-gradient(90deg, rgba(255,255,255,.2), rgba(255,255,255,.5), rgba(255,255,255,.2)); background-size:200% 100%; animation:shimmer 1.3s infinite; }
    @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}

    .photo-item img.photo-img{ width:100%; height:100%; object-fit:cover; transform-origin:center; animation:kenburns 14s ease-in-out infinite alternate; animation-play-state:paused; display:block; opacity:0; transition:opacity .25s ease; -webkit-user-drag:none; pointer-events:none; }
    .photo-item.is-loaded::before{ display:none; } .photo-item.is-loaded img.photo-img{ opacity:1; pointer-events:auto; }
    @keyframes kenburns{0%{transform:scale(1.02) translate3d(-1%,-1%,0);}100%{transform:scale(1.05) translate3d(1%,1%,0);}}

    /* Modal */
    #photoModal .modal-dialog{ width:auto; max-width:100vw; margin:1rem auto; }
    #photoModal .modal-content.no-header{ max-height:calc(100vh - 2rem); display:flex; flex-direction:column; align-items:center; justify-content:center; background:#000; border-radius:18px; box-shadow:0 10px 30px rgba(0,0,0,.3); }
    #photoModal .modal-body{ padding:0; overflow:hidden; width:100%; height:100%; }
    #photoModal .modal-figure{ position:relative; max-width:100%; max-height:100%; margin:0 auto; }

    .zoom-viewport{ position:relative; max-width:100%; max-height:100%; overflow:hidden; touch-action:none; /* allow custom gestures */ }
    .modal-img{ display:block; max-width:100%; height:auto; margin:0 auto; transform-origin:center center; /* will be transformed for zoom/pan */ }

    .modal-caption{ position:absolute; left:0; right:0; bottom:0; padding:.7rem 1rem .9rem; color:#ffe9d6; background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.55) 80%); font-size:1.075rem; line-height:1.45; letter-spacing:.1px; max-height:34%; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; }
    .modal-caption.expanded{ max-height:none; -webkit-line-clamp:initial; overflow:auto; background:linear-gradient(180deg, rgba(0,0,0,.35) 0%, rgba(0,0,0,.7) 100%); }
    .caption-toggle{ position:absolute; right:.75rem; bottom:.5rem; background:rgba(0,0,0,.35); color:#ffe9d6; border:1px solid rgba(255,255,255,.35); font-size:.85rem; padding:.2rem .5rem; border-radius:10px; cursor:pointer; }
  </style>

  <script>
    (function($){
      $(function () {
        // Basic download deterrents
        document.addEventListener('dragstart', e => e.preventDefault(), false);
        document.addEventListener('keydown', function(e){
          if ((e.ctrlKey || e.metaKey) && ['s','S','p','P'].includes(e.key)) e.preventDefault();
        });

        // Build list of photos for swipe nav
        var tiles = Array.prototype.slice.call(document.querySelectorAll('.photo-item'));
        var photos = tiles.map(function(t){ return { src: t.dataset.full, caption: t.dataset.caption || '' }; });

        var $grid = $('.photo-grid');
        $grid.imagesLoaded(function(){ $grid.masonry({ itemSelector: '.photo-item', percentPosition:true, gutter:12 }); });

        // Tile load skeleton/fade + fallback
        document.querySelectorAll('.photo-item img.photo-img').forEach(function(img){
          var item = img.closest('.photo-item');
          function markLoaded(){ item && item.classList.add('is-loaded'); }
          if (img.complete && img.naturalWidth) { markLoaded(); } else { img.addEventListener('load', markLoaded, { once:true }); }
          img.addEventListener('error', function(){
            var fallback = item.getAttribute('data-full');
            if (img.src !== fallback) { img.removeAttribute('srcset'); img.removeAttribute('sizes'); img.src = fallback; }
            else { markLoaded(); }
          }, { once:true });
        });

        // Modal refs
        var $modal = $('#photoModal');
        var $modalImg = $modal.find('.modal-img');
        var $modalCaption = $modal.find('.modal-caption');
        var $captionText = $modal.find('.caption-text');
        var $captionToggle = $modal.find('.caption-toggle');
        var viewport = document.querySelector('.zoom-viewport');

        // Fit computation
        function computeFit(nw, nh){
          var vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
          var vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
          var outerMargin = 32;
          var maxW = vw - outerMargin*2;
          var maxH = vh - outerMargin*2;
          var scale = Math.min(1, maxW / nw, maxH / nh);
          return Math.floor(nw * scale);
        }

        var currentIndex = -1;
        function openByIndex(idx){
          if (idx < 0) idx = photos.length - 1;
          if (idx >= photos.length) idx = 0;
          currentIndex = idx;
          var item = photos[idx];
          var preload = new Image();
          preload.onload = function(){
            resetZoomState(); // reset zoom before sizing
            var targetW = computeFit(preload.naturalWidth, preload.naturalHeight);
            $modalImg.css({ width: targetW + 'px', transform: 'translate(0px, 0px) scale(1)' }).attr('src', item.src);
            $captionText.text(item.caption || '');
            $modalCaption.removeClass('expanded'); $captionToggle.attr('aria-expanded','false').text('더보기');
            $modal.find('.modal-content').css('max-width', targetW + 'px');
            $modal.modal('show');
          };
          preload.onerror = function(){ $modalImg.attr('src', item.src); $captionText.text(item.caption||''); $modal.modal('show'); };
          preload.src = item.src;
        }

        // Open handlers
        $grid.on('click keydown', '.photo-item', function (e) {
          if (e.type === 'keydown' && e.key !== 'Enter' && e.key !== ' ') return;
          var idx = tiles.indexOf(this);
          openByIndex(idx);
        });

        // Caption expand/collapse
        $captionToggle.on('click', function(e){
          e.stopPropagation();
          var expanded = $modalCaption.toggleClass('expanded').hasClass('expanded');
          $(this).attr('aria-expanded', expanded ? 'true' : 'false').text(expanded ? '접기' : '더보기');
        });

        // Swipe navigation + pinch zoom + double tap
        var pointers = new Map();
        var baseScale = 1, scale = 1, minScale = 1, maxScale = 4;
        var tx = 0, ty = 0; // translation in px
        var lastTapTime = 0;

        function resetZoomState(){
          baseScale = 1; scale = 1; tx = 0; ty = 0;
          if ($modalImg[0]) $modalImg[0].style.transform = 'translate(0px, 0px) scale(1)';
        }

        function applyTransform(){
          $modalImg[0].style.transform = 'translate(' + tx + 'px,' + ty + 'px) scale(' + scale + ')';
        }

        function clampPan(){
          // limit panning so that you can't drag far beyond viewport
          var imgRect = $modalImg[0].getBoundingClientRect();
          var vpRect = viewport.getBoundingClientRect();
          var halfW = (imgRect.width * scale) / 2;
          var halfH = (imgRect.height * scale) / 2;
          var maxX = Math.max(0, halfW - vpRect.width/2);
          var maxY = Math.max(0, halfH - vpRect.height/2);
          tx = Math.min(Math.max(tx, -maxX), maxX);
          ty = Math.min(Math.max(ty, -maxY), maxY);
        }

        function distance(p1, p2){ var dx = p1.clientX - p2.clientX, dy = p1.clientY - p2.clientY; return Math.hypot(dx, dy); }
        function midpoint(p1, p2){ return { x: (p1.clientX + p2.clientX)/2, y: (p1.clientY + p2.clientY)/2 }; }

        var startX=0, startY=0, startTime=0, lastX=0, lastY=0;
        viewport.addEventListener('pointerdown', function(e){
          viewport.setPointerCapture(e.pointerId);
          pointers.set(e.pointerId, e);
          startTime = Date.now();
          startX = lastX = e.clientX;
          startY = lastY = e.clientY;
        });
        viewport.addEventListener('pointermove', function(e){
          if (!pointers.has(e.pointerId)) return;
          pointers.set(e.pointerId, e);

          if (pointers.size === 1){
            // pan or swipe
            var dx = e.clientX - lastX, dy = e.clientY - lastY;
            lastX = e.clientX; lastY = e.clientY;

            if (scale > 1){
              tx += dx; ty += dy; clampPan(); applyTransform();
            }
          } else if (pointers.size === 2){
            // pinch
            var arr = Array.from(pointers.values());
            var p1 = arr[0], p2 = arr[1];
            var curDist = distance(p1, p2);
            if (!viewport._startDist){
              viewport._startDist = curDist;
              viewport._startScale = scale;
            } else {
              var next = Math.min(maxScale, Math.max(minScale, viewport._startScale * (curDist / viewport._startDist)));
              // simple scaling around center; for better UX we could keep midpoint stable
              scale = next; clampPan(); applyTransform();
            }
          }
        });
        function endGesture(e){
          if (pointers.has(e.pointerId)) pointers.delete(e.pointerId);
          if (pointers.size < 2){ viewport._startDist = null; viewport._startScale = null; }

          // swipe to prev/next only when not zoomed
          if (pointers.size === 0 && scale === 1){
            var dt = Date.now() - startTime;
            var dx = e.clientX - startX, dy = e.clientY - startY;
            if (Math.abs(dx) > 60 && Math.abs(dy) < 40 && dt < 500){
              if (dx < 0) openByIndex(currentIndex + 1); else openByIndex(currentIndex - 1);
            }
          }
        }
        viewport.addEventListener('pointerup', endGesture);
        viewport.addEventListener('pointercancel', endGesture);
        viewport.addEventListener('pointerleave', function(e){ if (pointers.has(e.pointerId)) endGesture(e); });

        // double-tap to toggle zoom
        viewport.addEventListener('pointerdown', function(e){
          var now = Date.now();
          if (now - lastTapTime < 300){
            if (scale === 1){ scale = 2; } else { scale = 1; tx = 0; ty = 0; }
            clampPan(); applyTransform();
          }
          lastTapTime = now;
        });

        // Keyboard arrows for desktop
        document.addEventListener('keydown', function(e){
          if (!$modal.is(':visible')) return;
          if (scale > 1) return; // don't navigate while zoomed
          if (e.key === 'ArrowRight') { openByIndex(currentIndex + 1); }
          else if (e.key === 'ArrowLeft') { openByIndex(currentIndex - 1); }
          else if (e.key === 'Escape') { $modal.modal('hide'); }
        });

        // Centered resize refit
        function computeTargetWidthFromNatural(){
          var img = $modalImg[0]; if(!img || !img.naturalWidth) return null;
          return computeFit(img.naturalWidth, img.naturalHeight);
        }
        var refit = (function(){ var t; return function(){ clearTimeout(t); t=setTimeout(function(){
          var w = computeTargetWidthFromNatural(); if (w==null) return;
          if (scale === 1){ $modalImg.css({ width: w + 'px', transform:'translate(0px,0px) scale(1)' }); $modal.find('.modal-content').css('max-width', w + 'px'); }
          else { clampPan(); applyTransform(); }
        }, 120); };})();
        $(window).on('resize orientationchange', refit);
        if ('visualViewport' in window) window.visualViewport.addEventListener('resize', refit, { passive:true });

        // Close on clicking outside image (but not during gesture)
        $modal.on('click', '.modal-content', function(e){
          if (e.target.classList.contains('modal-img')) return; // handled by zoom/swipe
          $modal.modal('hide');
        });

        // Click on image also closes if not zoomed
        $modal.on('click', '.modal-img', function(){
          if (scale === 1) $modal.modal('hide');
        });
      });
    })(jQuery);
  </script>
</body>
</html>
